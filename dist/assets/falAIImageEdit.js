const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index2.js","./index.js"])))=>i.map(i=>d[i]);
import{d as de,r as s,c as r,a as o,b as l,e as g,w as t,f as re,t as v,F as R,g as D,h as y,o as d,i as pe,j as n,_ as me}from"./index.js";const ve={class:"fal-ai-image-edit"},fe={class:"apikey-section"},ye={key:0,class:"tip"},ge={key:1,class:"tip"},be={key:0,style:{"margin-top":"12px"}},xe={style:{display:"inline-block",border:"1px solid #e4e7ed","border-radius":"4px",padding:"4px",background:"#fff"}},ce=["src"],_e={key:0,style:{color:"red","margin-top":"16px"}},we={key:1,style:{"margin-top":"16px"}},he={key:2,style:{"margin-top":"24px"}},Ve={style:{display:"flex","flex-wrap":"wrap",gap:"16px"}},ke=["src","alt","width","height","onClick"],Ie={style:{"font-size":"12px",color:"#888"}},Pe={key:3,style:{"margin-top":"40px"}},ze={style:{"font-size":"13px",color:"#888","margin-bottom":"6px"}},Ue={style:{"margin-bottom":"6px"}},Ce={style:{color:"#333"}},Se={style:{"margin-bottom":"6px"}},Ae={key:0},Ne={style:{display:"flex","flex-wrap":"wrap",gap:"12px"}},Ee=["src","alt","width","height","onClick"],Ke={style:{"font-size":"11px",color:"#aaa"}},Re={style:{"text-align":"center"}},De=["src"],Oe={key:1,style:{"margin-top":"16px",color:"#666"}},je={style:{"text-align":"center"}},Fe=["src"],Le=`Keep the exact same bottle shape, proportions, and pump head position.
Do not change the number, size, angle, position, or layout of the bottles — even if the image contains multiple bottles of different sizes.
The structure and placement of the bottles must remain completely unchanged.
Any added content should be naturally and cleanly integrated without disrupting or covering the original layout.
Non-requirement: Do not add additional bottles.
Note: Please apply all visual updates based on the product information while preserving the bottle`,Je=de({__name:"falAIImageEdit",setup(O){let _=null;const w=s(""),i=s(null);async function j(){_||(_=(await me(async()=>{const{fal:f}=await import("./index2.js").then(e=>e.i);return{fal:f}},__vite__mapDeps([0,1]),import.meta.url)).fal)}function Z(){w.value&&(i.value=w.value)}function ee(){w.value="",i.value=null}const C=s(""),F=s(""),L=s(null),S=s(null),J=s(3.5),M=s(1),T=s("jpeg"),B=s("2"),A=s(""),G=s(!1),$=s(!0),V=s(!1),b=s([]),x=s(""),N=s([]),q=s([]),E=s(!1),k=s(null),I=s(null),K=s(!1);function le(f){if(L.value=f.raw||null,f.raw){const e=new FileReader;e.onload=h=>{var u;I.value=(u=h.target)==null?void 0:u.result},e.readAsDataURL(f.raw)}else I.value=null}function te(){I.value&&(K.value=!0)}function ae(){K.value=!1}function W(f){k.value=f,E.value=!0}function oe(){E.value=!1,k.value=null}async function se(){if(x.value="",b.value=[],N.value=[],!C.value.trim()){x.value="请输入描述（Prompt）";return}if(V.value=!0,await j(),!_){x.value="fal-ai 客户端加载失败",V.value=!1;return}if(!i.value){x.value="请先输入 API Key",V.value=!1;return}_.config({credentials:i.value});let f=F.value;try{if(L.value&&(b.value.push("正在上传图片..."),f=await _.storage.upload(L.value),b.value.push("图片上传成功")),!f){x.value="请上传图片或填写图片 URL",V.value=!1;return}b.value.push("正在请求 fal.ai 生成图片...");const h={prompt:$.value?`${Le}

${C.value}`:C.value,image_url:f,guidance_scale:J.value,num_images:M.value,output_format:T.value,safety_tolerance:B.value,sync_mode:G.value,...A.value?{aspect_ratio:A.value}:{},...S.value?{seed:S.value}:{}},u=await _.subscribe("fal-ai/flux-pro/kontext/max",{input:h,logs:!0,onQueueUpdate:p=>{p.status==="IN_PROGRESS"&&p.logs&&p.logs.map(P=>P.message).forEach(P=>{b.value.includes(P)||b.value.push(P)})}});u.data&&u.data.images?(N.value=u.data.images,b.value.push("图片生成成功"),q.value.unshift({params:JSON.parse(JSON.stringify(h)),images:JSON.parse(JSON.stringify(u.data.images)),time:new Date().toLocaleString()})):x.value="未获取到图片结果"}catch(e){x.value=(e==null?void 0:e.message)||"请求失败"}finally{V.value=!1}}return(f,e)=>{const h=y("el-input"),u=y("el-form-item"),p=y("el-button"),P=y("el-form"),ne=y("el-checkbox"),c=y("el-tooltip"),ie=y("el-upload"),Q=y("el-input-number"),m=y("el-option"),H=y("el-select"),ue=y("el-switch"),X=y("el-dialog");return d(),r("div",ve,[e[35]||(e[35]=o("h2",null,"fal.ai 图像编辑 DEMO",-1)),o("div",fe,[l(P,{inline:!0,class:"apikey-form"},{default:t(()=>[l(u,{label:"API Key："},{default:t(()=>[l(h,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=a=>w.value=a),type:"password",placeholder:"请输入 fal.ai API Key",style:{width:"260px"}},null,8,["modelValue"])]),_:1}),l(u,null,{default:t(()=>[l(p,{type:"primary",onClick:Z},{default:t(()=>e[13]||(e[13]=[n("保存")])),_:1}),i.value?(d(),pe(p,{key:0,onClick:ee,type:"default"},{default:t(()=>e[14]||(e[14]=[n("清除")])),_:1})):g("",!0)]),_:1})]),_:1}),i.value?(d(),r("div",ge,e[16]||(e[16]=[o("span",{style:{color:"green"}},"API Key 已保存，可正常使用 fal.ai 能力。",-1)]))):(d(),r("div",ye,e[15]||(e[15]=[o("span",{style:{color:"red"}},"请先输入 API Key，所有功能仅用于 DEMO，切勿用于生产环境！",-1)])))]),l(P,{class:"falai-form",onSubmit:re(se,["prevent"]),"label-width":"140px"},{default:t(()=>[l(u,{label:"固定提示词："},{default:t(()=>[e[18]||(e[18]=o("div",{style:{background:"#f5f7fa",padding:"12px","border-radius":"6px",border:"1px solid #e4e7ed","margin-bottom":"8px"}},[o("div",{style:{"font-size":"14px",color:"#606266","line-height":"1.6"}},[n(" 保持瓶子的确切形状、比例和泵头位置不变。"),o("br"),n(" 不要改变瓶子的数量、大小、角度、位置或布局 — 即使图像包含多个不同大小的瓶子。"),o("br"),n(" 瓶子的结构和位置必须保持完全不变。"),o("br"),n(" 任何添加的内容都应该自然地、干净地集成，而不破坏或覆盖原始布局。"),o("br"),n(" 非要求不要追加额外的瓶子出来。"),o("br"),n(" 注意：请根据产品信息应用所有视觉更新，同时保持瓶子的完整性。 ")])],-1)),l(ne,{modelValue:$.value,"onUpdate:modelValue":e[1]||(e[1]=a=>$.value=a),disabled:!i.value},{default:t(()=>e[17]||(e[17]=[n("使用固定提示词")])),_:1},8,["modelValue","disabled"])]),_:1}),l(u,{label:"描述（Prompt）："},{default:t(()=>[l(h,{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=a=>C.value=a),type:"textarea",autosize:{minRows:4,maxRows:8},disabled:!i.value,placeholder:"请输入描述，如：在面粉旁边放一个甜甜圈。",style:{width:"100%","font-size":"16px"}},null,8,["modelValue","disabled"]),l(c,{content:"用于生成图像的提示词",placement:"top"},{default:t(()=>[l(p,{type:"text",size:"small",style:{padding:"0","margin-left":"8px"}},{default:t(()=>e[19]||(e[19]=[n("参数说明")])),_:1})]),_:1})]),_:1}),l(u,{label:"图片："},{default:t(()=>[l(ie,{"show-file-list":!0,disabled:!i.value,accept:"image/*",action:"#","auto-upload":!1,"on-change":le,limit:1},{default:t(()=>[l(p,{disabled:!i.value},{default:t(()=>e[20]||(e[20]=[n("选择图片")])),_:1},8,["disabled"])]),_:1},8,["disabled"]),e[23]||(e[23]=o("span",{style:{margin:"0 8px"}},"或",-1)),l(h,{modelValue:F.value,"onUpdate:modelValue":e[3]||(e[3]=a=>F.value=a),disabled:!i.value,placeholder:"图片 URL（可选）",style:{width:"260px"}},null,8,["modelValue","disabled"]),I.value?(d(),r("div",be,[e[21]||(e[21]=o("div",{style:{"font-size":"12px",color:"#666","margin-bottom":"4px"}},"选择的图片：",-1)),o("div",xe,[o("img",{src:I.value,alt:"selected-image",style:{"max-width":"120px","max-height":"80px",display:"block",cursor:"pointer","object-fit":"contain"},onClick:te},null,8,ce)])])):g("",!0),l(c,{content:"用于 omnimodel 的图像提示",placement:"top"},{default:t(()=>[l(p,{type:"text",size:"small",style:{padding:"0","margin-left":"8px"}},{default:t(()=>e[22]||(e[22]=[n("参数说明")])),_:1})]),_:1})]),_:1}),l(u,{label:"种子值（Seed）："},{default:t(()=>[l(Q,{modelValue:S.value,"onUpdate:modelValue":e[4]||(e[4]=a=>S.value=a),disabled:!i.value,min:1,max:999999,style:{width:"120px"}},null,8,["modelValue","disabled"]),l(c,{content:"相同的种子值和提示词给定给相同版本的模型将每次都输出相同的图像",placement:"top"},{default:t(()=>[l(p,{type:"text",size:"small",style:{padding:"0","margin-left":"8px"}},{default:t(()=>e[24]||(e[24]=[n("参数说明")])),_:1})]),_:1})]),_:1}),l(u,{label:"引导强度："},{default:t(()=>[l(Q,{modelValue:J.value,"onUpdate:modelValue":e[5]||(e[5]=a=>J.value=a),min:1,max:20,step:.1,disabled:!i.value},null,8,["modelValue","disabled"]),l(c,{content:"CFG（无分类器引导）比例是衡量您希望模型在寻找相关图像时对提示词的遵循程度。默认值：3.5",placement:"top"},{default:t(()=>[l(p,{type:"text",size:"small",style:{padding:"0","margin-left":"8px"}},{default:t(()=>e[25]||(e[25]=[n("参数说明")])),_:1})]),_:1})]),_:1}),l(u,{label:"生成图片数量："},{default:t(()=>[l(Q,{modelValue:M.value,"onUpdate:modelValue":e[6]||(e[6]=a=>M.value=a),min:1,max:6,disabled:!i.value},null,8,["modelValue","disabled"]),l(c,{content:"要生成的图像数量。默认值：1",placement:"top"},{default:t(()=>[l(p,{type:"text",size:"small",style:{padding:"0","margin-left":"8px"}},{default:t(()=>e[26]||(e[26]=[n("参数说明")])),_:1})]),_:1})]),_:1}),l(u,{label:"输出格式："},{default:t(()=>[l(H,{modelValue:T.value,"onUpdate:modelValue":e[7]||(e[7]=a=>T.value=a),disabled:!i.value,style:{width:"120px"}},{default:t(()=>[l(m,{label:"JPEG 格式",value:"jpeg"}),l(m,{label:"PNG 格式",value:"png"})]),_:1},8,["modelValue","disabled"]),l(c,{content:"生成图像的格式。默认值：jpeg",placement:"top"},{default:t(()=>[l(p,{type:"text",size:"small",style:{padding:"0","margin-left":"8px"}},{default:t(()=>e[27]||(e[27]=[n("参数说明")])),_:1})]),_:1})]),_:1}),l(u,{label:"安全等级："},{default:t(()=>[l(H,{modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=a=>B.value=a),disabled:!i.value,style:{width:"120px"}},{default:t(()=>[l(m,{label:"最严格",value:"1"}),l(m,{label:"严格",value:"2"}),l(m,{label:"中等",value:"3"}),l(m,{label:"宽松",value:"4"}),l(m,{label:"最宽松",value:"5"}),l(m,{label:"无限制",value:"6"})]),_:1},8,["modelValue","disabled"]),l(c,{content:"生成图像的安全容差级别，1最严格，6最宽松。默认值：2",placement:"top"},{default:t(()=>[l(p,{type:"text",size:"small",style:{padding:"0","margin-left":"8px"}},{default:t(()=>e[28]||(e[28]=[n("参数说明")])),_:1})]),_:1})]),_:1}),l(u,{label:"宽高比："},{default:t(()=>[l(H,{modelValue:A.value,"onUpdate:modelValue":e[9]||(e[9]=a=>A.value=a),disabled:!i.value,style:{width:"120px"}},{default:t(()=>[l(m,{label:"默认",value:""}),l(m,{label:"21:9",value:"21:9"}),l(m,{label:"16:9",value:"16:9"}),l(m,{label:"4:3",value:"4:3"}),l(m,{label:"3:2",value:"3:2"}),l(m,{label:"1:1",value:"1:1"}),l(m,{label:"2:3",value:"2:3"}),l(m,{label:"3:4",value:"3:4"}),l(m,{label:"9:16",value:"9:16"}),l(m,{label:"9:21",value:"9:21"})]),_:1},8,["modelValue","disabled"]),l(c,{content:"生成图像的宽高比",placement:"top"},{default:t(()=>[l(p,{type:"text",size:"small",style:{padding:"0","margin-left":"8px"}},{default:t(()=>e[29]||(e[29]=[n("参数说明")])),_:1})]),_:1})]),_:1}),l(u,{label:"同步模式："},{default:t(()=>[l(ue,{modelValue:G.value,"onUpdate:modelValue":e[10]||(e[10]=a=>G.value=a),disabled:!i.value},null,8,["modelValue","disabled"]),l(c,{content:"如果设置为true，函数将等待图像生成并上传后再返回响应。默认值：false",placement:"top"},{default:t(()=>[l(p,{type:"text",size:"small",style:{padding:"0","margin-left":"8px"}},{default:t(()=>e[30]||(e[30]=[n("参数说明")])),_:1})]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(p,{type:"primary","native-type":"submit",disabled:!i.value||V.value},{default:t(()=>[n(v(V.value?"生成中...":"生成图片"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),x.value?(d(),r("div",_e,v(x.value),1)):g("",!0),b.value.length?(d(),r("div",we,[e[31]||(e[31]=o("div",{style:{"font-weight":"bold"}},"日志：",-1)),o("ul",null,[(d(!0),r(R,null,D(b.value,(a,z)=>(d(),r("li",{key:z},v(a),1))),128))])])):g("",!0),N.value.length?(d(),r("div",he,[e[32]||(e[32]=o("div",{style:{"font-weight":"bold"}},"生成结果：",-1)),o("div",Ve,[(d(!0),r(R,null,D(N.value,(a,z)=>(d(),r("div",{key:z,style:{border:"1px solid #eee",padding:"8px","border-radius":"6px",background:"#fff"}},[o("img",{src:a.url,alt:"result-"+z,width:a.width/4,height:a.height/4,style:{"max-width":"200px",display:"block","margin-bottom":"8px",cursor:"pointer"},onClick:U=>W(a)},null,8,ke),o("div",Ie,v(a.width)+"x"+v(a.height),1)]))),128))])])):g("",!0),q.value.length?(d(),r("div",Pe,[e[34]||(e[34]=o("div",{style:{"font-weight":"bold","font-size":"16px"}},"历史记录",-1)),(d(!0),r(R,null,D(q.value,(a,z)=>(d(),r("div",{key:z,style:{"margin-top":"18px",padding:"12px",border:"1px solid #eee","border-radius":"6px",background:"#f8f8fa"}},[o("div",ze,v(a.time),1),o("div",Ue,[e[33]||(e[33]=n("Prompt: ")),o("span",Ce,v(a.params.prompt),1)]),o("div",Se,[n("引导强度: "+v(a.params.guidance_scale)+" | 数量: "+v(a.params.num_images)+" | 输出格式: "+v(a.params.output_format)+" ",1),a.params.aspect_ratio?(d(),r("span",Ae,"| 宽高比: "+v(a.params.aspect_ratio),1)):g("",!0)]),o("div",Ne,[(d(!0),r(R,null,D(a.images,(U,Y)=>(d(),r("div",{key:Y,style:{border:"1px solid #eee",padding:"4px","border-radius":"4px",background:"#fff"}},[o("img",{src:U.url,alt:"history-"+z+"-"+Y,width:U.width/8,height:U.height/8,style:{"max-width":"100px",display:"block",cursor:"pointer"},onClick:Te=>W(U)},null,8,Ee),o("div",Ke,v(U.width)+"x"+v(U.height),1)]))),128))])]))),128))])):g("",!0),l(X,{modelValue:E.value,"onUpdate:modelValue":e[11]||(e[11]=a=>E.value=a),title:"图片预览",width:"80%","before-close":oe},{default:t(()=>[o("div",Re,[k.value?(d(),r("img",{key:0,src:k.value.url,style:{"max-width":"100%","max-height":"70vh","object-fit":"contain"}},null,8,De)):g("",!0),k.value?(d(),r("div",Oe," 尺寸: "+v(k.value.width)+" x "+v(k.value.height),1)):g("",!0)])]),_:1},8,["modelValue"]),l(X,{modelValue:K.value,"onUpdate:modelValue":e[12]||(e[12]=a=>K.value=a),title:"选择图片预览",width:"80%","before-close":ae},{default:t(()=>[o("div",je,[I.value?(d(),r("img",{key:0,src:I.value,style:{"max-width":"100%","max-height":"70vh","object-fit":"contain"}},null,8,Fe)):g("",!0)])]),_:1},8,["modelValue"])])}}}),Me=(O,_)=>{const w=O.__vccOpts||O;for(const[i,j]of _)w[i]=j;return w},Ge=Me(Je,[["__scopeId","data-v-790754fd"]]);export{Ge as default};
